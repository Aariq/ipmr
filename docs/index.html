<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fits IPMs using an expression based framework  â€¢ ipmr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fits IPMs using an expression based framework ">
<meta property="og:description" content="Flexibly implements IPMs using an expression based framework. This
  will not abstract away the model selection process, but it will make sure you
  get everything after that correct. It handles density dependence and environmental
  stochasticity, with a couple options for implementing the latter. Additionally,
  provides model diagnostic tools, plotting functionality, and analysis tools.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ipmr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ipmr-introduction.html">Introduction to ipmr</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="ipmr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ipmr" class="anchor"></a>ipmr</h1></div>
<p>Not yet functional. See below for an example of what the workflow will look like and open issues to suggest alternatives.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Example of the API for a simple IPM without density dependence or environmental</span>
<span class="co"># stochasticity</span>

my_ipm &lt;-<span class="st"> </span><span class="kw">init_ipm</span>(<span class="dt">class =</span> <span class="st">'simple-ndd-det'</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_kernel</span>(
    <span class="co"># Name of the kernel</span>
    <span class="dt">name =</span> <span class="st">"P"</span>,
    <span class="co"># The type of transition it describes (e.g. continuous - continuous, discrete - continuous)</span>
    <span class="dt">family =</span> <span class="st">"IPM_CC"</span>,
    <span class="co"># The formula for the kernel. don't forget to transpose the growth matrix when multiplying survival</span>
    <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(s <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/t">t</a></span>(g)),
    <span class="co"># A named set of expressions for the vital rates it includes</span>
    <span class="dt">s =</span> <span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">exp</a></span>(<span class="op">-</span>(bs_<span class="dv">0</span> <span class="op">+</span><span class="st"> </span>bs_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>size_<span class="dv">1</span>))),
    <span class="dt">g =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">dnorm</a></span>(size_<span class="dv">2</span>, mean_g, sd_g),
    <span class="dt">mean_g =</span> bg_<span class="dv">0</span> <span class="op">+</span><span class="st"> </span>bg_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>size_<span class="dv">1</span>,
    <span class="co"># A list containing named values for each constant </span>
    <span class="dt">data_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">bs_0 =</span> <span class="fl">0.2</span>, <span class="co"># could also be coef(my_surv_mod)[1]</span>
                     <span class="dt">bs_1 =</span> <span class="fl">0.978</span>,
                     <span class="dt">bg_0 =</span> <span class="fl">0.78</span>,
                     <span class="dt">bg_1 =</span> <span class="fl">0.967</span>,
                     <span class="dt">sd_g =</span> <span class="fl">3.4</span>),
    <span class="co"># The state variable for time T</span>
    <span class="dt">domain_start =</span> size_<span class="dv">1</span>,
    <span class="co"># The state variable for T+1. for IPM_CC's, this will almost always be the same </span>
    <span class="co"># as domain_start. Scroll down to see examples of when it isn't</span>
    <span class="dt">domain_end =</span> size_<span class="dv">2</span>,
    <span class="co"># The type of eviction correction. Set to NA if you wish to correct on your own</span>
    <span class="dt">evict_type =</span> <span class="st">'truncated_distributions'</span>
    ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_kernel</span>(
    <span class="dt">name =</span> <span class="st">"F"</span>,
    <span class="dt">family =</span> <span class="st">"IPM_CC"</span>,
    <span class="dt">formula =</span> r_s <span class="op">*</span><span class="st"> </span>r_n <span class="op">*</span><span class="st"> </span>r_p,
    <span class="dt">r_s =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">dnorm</a></span>(size_<span class="dv">2</span>, recr_mean, recr_sd),
    <span class="dt">r_n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">exp</a></span>(br_<span class="dv">0</span> <span class="op">+</span><span class="st"> </span>br_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>size_<span class="dv">1</span>),
    <span class="dt">r_p =</span> <span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">exp</a></span>(<span class="op">-</span>(bp_<span class="dv">0</span> <span class="op">+</span><span class="st"> </span>bp_<span class="dv">1</span> <span class="op">*</span><span class="st"> </span>size_<span class="dv">1</span>))),
    <span class="dt">data_list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">recr_mean =</span> <span class="fl">0.67</span>,
                     <span class="dt">recr_sd =</span> <span class="fl">0.3</span>,
                     <span class="dt">br_0 =</span> <span class="fl">2.9</span>,
                     <span class="dt">br_1 =</span> <span class="fl">6.5</span>,
                     <span class="dt">bp_0 =</span> <span class="fl">0.65</span>,
                     <span class="dt">bp_1 =</span> <span class="fl">0.72</span>),
    <span class="dt">domain_start =</span> size_<span class="dv">1</span>,
    <span class="dt">domain_end =</span> size_<span class="dv">2</span>,
    <span class="dt">evict_type =</span> <span class="st">'truncated_distributions'</span>
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">add_K</span>(
    <span class="dt">formula =</span> P <span class="op">+</span><span class="st"> </span>F
  ) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">make_ipm</span>(
    <span class="co"># each element of make_domain_list takes lower, upper, and the number of meshpoints</span>
    <span class="dt">domain_list =</span> <span class="kw">make_domain_list</span>(<span class="dt">size =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.01</span>, <span class="dv">100</span>, <span class="dv">200</span>)),
    <span class="co"># The rule to use for numerically approximating the integral</span>
    <span class="dt">integration_rule =</span> <span class="st">"midpoint"</span>
  )</code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Levin <br><small class="roles"> Author, maintainer </small>  </li>
<li>First Last <br><small class="roles"> Author </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sam Levin, First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
