<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Functions to initialize and define IPM kernels — define_kernel • ipmr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Functions to initialize and define IPM kernels — define_kernel" />
<meta property="og:description" content="Adds a new kernel to the proto_ipm structure. Different
classes of IPMs may have many or only a few kernels. Each one requires its
own call to this function, though there are some exceptions, namely for kernels
derived from hierarchical models (e.g. vital rate models fit across plots and years).
See Details for more info" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipmr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/general-ipms.html">General IPMs</a>
    </li>
    <li>
      <a href="../articles/hierarchical-notation.html">Hierarchical Notation</a>
    </li>
    <li>
      <a href="../articles/ipmr-introduction.html">Introduction to ipmr</a>
    </li>
    <li>
      <a href="../articles/proto-ipms.html">proto_ipm data structure</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Functions to initialize and define IPM kernels</h1>
    
    <div class="hidden name"><code>kernel-definitions.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds a new kernel to the <code>proto_ipm</code> structure. Different
classes of IPMs may have many or only a few kernels. Each one requires its
own call to this function, though there are some exceptions, namely for kernels
derived from hierarchical models (e.g. vital rate models fit across plots and years).
See Details for more info</p>
    </div>

    <pre class="usage"><span class='fu'>define_kernel</span>(
  <span class='no'>proto_ipm</span>,
  <span class='no'>name</span>,
  <span class='no'>formula</span>,
  <span class='no'>family</span>,
  <span class='no'>...</span>,
  <span class='kw'>data_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>states</span>,
  <span class='kw'>has_hier_effs</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>levels_hier_effs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='kw'>evict</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>evict_fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)

<span class='fu'>define_k</span>(
  <span class='no'>proto_ipm</span>,
  <span class='no'>name</span>,
  <span class='no'>family</span>,
  <span class='no'>...</span>,
  <span class='kw'>data_list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>states</span>,
  <span class='kw'>has_hier_effs</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>levels_hier_effs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='kw'>evict</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>evict_fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>proto_ipm</th>
      <td><p>The name of object you wish to append the new kernel to.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>The name of the new kernel - can be anything as long as it is
unique to the model.</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>A bare expression specifying the form of the kernel. See below
for examples</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>The type of kernel. Options are <code>"CC"</code> for continuous to continuous
transitions, <code>"DC"</code> for discrete to continuous (e.g. emergence from a seedbank),
<code>"CD"</code> for continuous to discrete (e.g. entering a seedbank), and <code>"DD"</code> for
discrete to discrete (e.g. stasis in a seedbank).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For <code>define_kernel</code>, set of named expressions that correspond
to vital rates in <code>formula</code>. For <code>define_K</code>, a set of named expressions
that relate the population state at T + 1 to the population state at T. Alternatively,
can be an expression where the left hand side is the name of the kernel specified
in <code>name</code> and the right hand side only describes the structure of the
iteration kernel. In all cases, suffix expansion of hierarchical models is supported.
Specific details for each case are in their respecitive function's sections
below.</p></td>
    </tr>
    <tr>
      <th>data_list</th>
      <td><p>A list of named values that correspond to constants in the formula.
You do not need to specify vectors corresponding to the domains here.</p></td>
    </tr>
    <tr>
      <th>states</th>
      <td><p>A character vector containing the names of each state variable used in
the kernel.</p></td>
    </tr>
    <tr>
      <th>has_hier_effs</th>
      <td><p>A logical indicating whether or not the kernel and/or its
underlying vital rates are structured with hierarchical effects. If so and you
specify either the functional forms or the exact parameter values you want to use,
the kernels will be automatically split according to the notation in the vital
rates and kernel formulae and multiple kernels will be built. See the vignette
on the syntax for this feature for more details (<code><a href='https://rdrr.io/r/utils/vignette.html'>vignettes(
'hierarchical-notation', package = 'ipmr')</a></code>).</p></td>
    </tr>
    <tr>
      <th>levels_hier_effs</th>
      <td><p>A named list with vectors corresponding the various levels
the hierarchical variable can take. Entries in this list should be a single
vector and should be character or integer typed.</p></td>
    </tr>
    <tr>
      <th>evict</th>
      <td><p>A logical indicating whether an eviction correction should be applied
to the kernel. It is generally recommended to use a function in the vital rate
definition as opposed to using this option Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>evict_fun</th>
      <td><p>If <code>evict == TRUE</code>, then a function that corrects for it.
Currently, the only implemented function is <code>truncated_distributions</code>.
This works by modifying the functional form of the vital rate expressions
<code>...</code>, and so supplying your own function in this slot will be difficult.
One can also specify <code>usr_funs</code> function that performs the correction
during the numerical implementation of the model itself. In that case,
set <code>evict</code> to <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>All functions described here return a <code>proto_ipm</code>.</p>
    <h2 class="hasAnchor" id="define-k"><a class="anchor" href="#define-k"></a><code>define_k</code></h2>

    


<p>The preferred method of defining a <code>K</code> kernel is to use the left
hand side of the <code>...</code> to reference the population vectors that the right
hand side creates (e.g. <code>n_T_1 = (P + F) * n_T</code>). This enables powerful
iteration-based methods to work properly. On the other hand, these iteration
based methods can be quite time consuming, and many applications only require
an iteration matrix while not necessarily requiring the population vectors (e.g.
calculations of deterministic population growth rate). In those cases, the
<code>...</code> can contain something like <code>K = P + F</code>. In this case, the left
hand side of the expression should match the <code>name</code> argument to <code>define_k</code>.</p>
    <h2 class="hasAnchor" id="define-kernel"><a class="anchor" href="#define-kernel"></a><code>define_kernel</code></h2>

    


<p>Describe vital rate expression syntax - include suffix expansion of hier_effs</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#define-k"><code>define_k</code></a></li>
      <li><a href="#define-kernel"><code>define_kernel</code></a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/levisc8'>Sam Levin</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


