<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Methods to implement an IPM — make_ipm • ipmr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Methods to implement an IPM — make_ipm" />
<meta property="og:description" content="The make_ipm.* methods convert a proto_ipm into a
set of discretized kernels and population vectors. Methods have different
requirements, so be sure to read the parameter documentation. 
vignettes('Introduction to ipmr', 'ipmr') also contains helpful information." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ipmr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Introduction to ipmr</li>
    <li>
      <a href="../articles/ipmr-introduction.html">Introduction to ipmr</a>
    </li>
    <li>
      <a href="../articles/general-ipms.html">General IPMs</a>
    </li>
    <li>
      <a href="../articles/hierarchical-notation.html">Hierarchical Notation</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Generic Functions</li>
    <li>
      <a href="../articles/generic-funs.html">List of Generic and Helper Functions in ipmr</a>
    </li>
    <li>
      <a href="../articles/generic-progress.html">Generic Progress</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">proto_ipm Overview</li>
    <li>
      <a href="../articles/proto-ipms.html">proto_ipm data structure</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">ipmr Checks</li>
    <li>
      <a href="../articles/sanity-checks.html">Sanity checks for ipmr examples</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Methods to implement an IPM</h1>
    
    <div class="hidden name"><code>make_ipm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>make_ipm.*</code> methods convert a <code>proto_ipm</code> into a
set of discretized kernels and population vectors. Methods have different
requirements, so be sure to read the parameter documentation. <code><a href='https://rdrr.io/r/utils/vignette.html'>
vignettes('Introduction to ipmr', 'ipmr')</a></code> also contains helpful information.</p>
    </div>

    <pre class="usage"><span class='fu'>make_ipm</span>(<span class='no'>proto_ipm</span>, <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(), <span class='no'>...</span>)

<span class='co'># S3 method for simple_di_det</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># S3 method for simple_di_stoch_kern</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>kernel_seq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># S3 method for simple_di_stoch_param</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>kernel_seq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># S3 method for general_di_det</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># S3 method for general_di_stoch_kern</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>kernel_seq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># S3 method for general_di_stoch_param</span>
<span class='fu'>make_ipm</span>(
  <span class='no'>proto_ipm</span>,
  <span class='kw'>return_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>usr_funs</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='no'>...</span>,
  <span class='kw'>domain_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>iterate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>kernel_seq</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>normalize_pop_size</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>proto_ipm</th>
      <td><p>The proto_ipm object you wish to implement. This should be the
output of <code>define_kernel</code>, <code>define_k</code>, or the <code>define_*</code> functions.</p></td>
    </tr>
    <tr>
      <th>return_all</th>
      <td><p>A logical indicating whether to return the environments that
the kernel expressions are evaluated in. This is useful for developer
debugging and not much else.</p></td>
    </tr>
    <tr>
      <th>usr_funs</th>
      <td><p>An optional list of user-specified functions that are passed
on to the evaluation environments. This can help make vital rate expressions
more concise and expressive. Names in this list should exactly match the names
of the function calls in the <code>...</code> or <code>formula</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments passed to methods</p></td>
    </tr>
    <tr>
      <th>domain_list</th>
      <td><p>An optional list of new domain information to implement
the IPM with.</p></td>
    </tr>
    <tr>
      <th>iterate</th>
      <td><p>A logical indicating whether or not iterate the model before exiting
or just return the iteration kernels. For density dependent (<code>dd</code>) and/or
stochastic parameter resampled models (<code>stoch_param</code>), this should always
be <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>iterations</th>
      <td><p>If <code>iterate</code> is <code>TRUE</code>, then the number of iterations
to simulate.</p></td>
    </tr>
    <tr>
      <th>normalize_pop_size</th>
      <td><p>A logical indicating whether to re-scale the population
vector to sum before each iteration. Default is <code>TRUE</code> for <code>*_di_*</code>
methods and <code>FALSE</code> for <code>*_dd_*</code> methods.</p></td>
    </tr>
    <tr>
      <th>kernel_seq</th>
      <td><p>For <code>*_stoch_kern</code> methods, the sequence of kernels
to use during the simulation process. It should have the same number of entries
as the number of <code>iterations</code>.
This can either be a vector of integers corresponding to kernel names (e.g.
kernels for different years - <code>2011:2018</code>),
a character vector corresponding to kernel names (e.g. kernels from different
sites - <code>'a', 'b', 'c'</code>), a Markov chain matrix with
transition probabilities between given states (NOT YET IMPLEMENTED), or empty.
If it is empty, <code>make_ipm</code> will try to generate a sequence internally using
a random selection of the <code>levels_hier_effs</code> defined in <code>define_kernel</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>make_ipm.*</code> methods will always return a list of length 6
containing the following components:</p>
<ul>
<li><p><strong>iterators</strong>: iteration kernel(s) (if specified by <code>define_k</code>)
                            for <code>simple_*</code>. otherwise contains <code>NA</code>.</p></li>
<li><p><strong>sub_kernels</strong>: a list of sub_kernels specified in <code>define_kernel</code>.</p></li>
<li><p><strong>env_list</strong>: a list containing the evaluation environments of
                           kernel. This will always be empty unless <code>
                           return_all</code> is <code>TRUE</code>. Mostly here for developer
                           debugging.</p></li>
<li><p><strong>env_seq</strong>: a matrix with dimension <code>iterations</code> X 1 of
                             kernel indices indicating the order
                             in which kernels are to be/were resampled OR
                             a matrix with as many columns as stochastic parameters
                             and <code>n_iterations</code> rows.</p></li>
<li><p><strong>pop_state</strong>: population vectors
                             stored as a list of arrays. The first dimension
                             of each array corresponds to the state variable distribution,
                             and the second dimsension corresponds to time
                             steps.</p></li>
<li><p><strong>proto_ipm</strong>: the <code>proto_ipm</code> object used to implement
                             the model.</p></li>
</ul>

<p>In addition to the list class, each object will have the class from
<code>model_class</code> defined in <code>init_ipm</code> plus <code>'_ipm'</code>. This is to
facilitate <code>print</code>, <code>plot</code>, and <code>lambda</code> methods. For example,
a <code>'simple_di_stoch_kern'</code> model will have the class
<code>'simple_di_stoch_kern_ipm'</code> once it has been implemented using
<code>make_ipm</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When <code>kernel_seq</code> is a character vector, names
are matched using <code><a href='https://rdrr.io/r/base/grep.html'>grepl()</a></code>. When it is an integer vector, the vector
is first checked to make sure they are all present in kernel names. The model
procedure will stop if thay are not all present.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/levisc8'>Sam Levin</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


